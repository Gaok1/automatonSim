<!DOCTYPE html>
<!--
  Página AFN/AFNλ: permite edições não-determinísticas e λ-transições.
  Ferramentas de conversão: AFNλ → AFN e AFN → AFD (com opção de abrir no AFD).
-->
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <title>Simulador Interativo de AFN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css">
</head>

<body>

  <nav class="tabs">
    <a href="index.html">AFD</a>
    <a href="afn.html" class="active">AFN</a>
    <a href="gr.html">GR</a>
  </nav>

  <div class="left" style="min-width:420px">
    <div class="card">
      <h2>Alfabeto</h2>
      <div class="row">
        <input type="text" id="alphabetInput" placeholder="Símbolos separados por vírgula. Ex: A,B" />
        <button class="btn-accent" id="setAlphabetBtn">Definir</button>
        <span class="muted mini">Use apenas símbolos unitários (sem strings). Ex.: <span class="kbd">A</span>, <span
            class="kbd">B</span>, <span class="kbd">0</span>, <span class="kbd">1</span>.</span>
      </div>
      <div id="alphabetView" class="pill muted">Σ = { }</div>
    </div>

    <div class="card">
      <h2>Estados</h2>
      <div class="toolbar">
        <button id="addStateBtn">+ Estado</button>
        <button id="toggleInitialBtn" class="btn-soft">Alternar Inicial</button>
        <button id="toggleFinalBtn" class="btn-soft">Alternar Final</button>
        <button id="deleteSelectedBtn" class="btn-danger">Excluir Selecionado</button>
        <button id="editBtn" class="btn-soft" title="Editar (E)">Editar</button>
        <button id="resetBtn" class="btn-danger">Limpar AF</button>
        <button id="helpBtn" class="btn-soft" title="Ajuda (atalhos e dicas)">Ajuda</button>
      </div>
      <div class="toolbar">
        <button id="layoutPresetCompactBtn" class="btn-soft" title="Preset: compacto (agrupa)">Compacto</button>
        <button id="layoutPresetBalancedBtn" class="btn-soft" title="Preset: balanceado">Balanceado</button>
        <button id="layoutPresetSpreadBtn" class="btn-soft" title="Preset: espalhar">Espalhar</button>
      </div>
      <div class="legend">
        <span class="dot dot-initial"></span><span class="mini">Inicial</span>
        <span class="dot dot-final"></span><span class="mini">Final</span>
        <span class="dot dot-halt"></span><span class="mini">HALT (transição ausente)</span>
      </div>
      <div class="hr"></div>
    </div>

    <div class="card grid cols-2">
      <div>
        <h2>Simular Palavra</h2>
        <div class="row">
          <input type="text" id="wordInput" placeholder="Ex: ABAAB" />
          <button id="runBtn" class="btn-accent">Rodar</button>
          <button id="runStartBtn" class="btn-soft">Modo Run</button>
          <button id="runStepBtn" class="btn-soft" disabled>Passo</button>
        </div>
        <div id="runResult" class="mini"></div>
        <div id="runSteps" class="scroll mini"></div>
      </div>
      <div>
        <h2>Expressão Regular (AFD → ER)</h2>
        <div class="row">
          <label><input type="checkbox" id="allowEpsilon" /> Permitir λ na saída</label>
          <button id="buildRegexBtn">Gerar ER</button>
        </div>
        <div id="regexMsg" class="mini muted"></div>
        <div id="regexOut" class="pill" style="margin-top:6px; font-weight:700; font-size:15px;"></div>
      </div>
    </div>

  <div class="card">
    <h2>Exportar / Importar</h2>
    <div class="toolbar">
      <button id="exportBtn" class="btn-soft">Exportar AF</button>
      <button id="exportPngBtn" class="btn-soft">Exportar PNG</button>
      <button id="importBtn" class="btn-soft">Importar AF</button>
      <input type="file" id="importFile" accept="application/json" style="display:none" />
    </div>
    <div class="mini muted">Exporta um JSON com Σ, estados, transições, inicial e <code>nextId</code>. Importar
      substituirá o AF atual.</div>
  </div>

  
    <!-- Exemplos ficam na barra lateral esquerda -->
    <div class="card">
      <h2>Exemplos</h2>
      <div class="row">
        <select id="examplesSelect">
          <option value="">Escolha um exemplo…</option>
        </select>
        <button id="loadExampleBtn" class="btn-soft">Carregar</button>
      </div>
      <div class="mini muted">Carrega um AF/AFD de exemplos prontos desta biblioteca.</div>
    </div>
  </div>

  <div class="right" style="flex:1.8">
    <div class="card">
      <h2>Canvas</h2>
      <div id="canvasWrapper">
        <svg id="svg">
          <defs>
            <marker id="arrow" markerWidth="18" markerHeight="12" refX="10" refY="6" orient="auto"
              markerUnits="strokeWidth">
              <path d="M0,0 L10,6 L0,12 z" fill="#cbd5e1"></path>
            </marker>
          </defs>
          <g id="edges"></g>
          <g id="labels"></g>
          <g id="initialPointers"></g>
          <g id="states"></g>
        </svg>
      </div>
      <div class="hr"></div>
      <div class="mini muted">Transições</div>
      <div id="transitionsList" class="scroll mini"></div>
    </div>

    <!-- Conversões e operações AFNλ logo abaixo do Canvas -->
    <div class="card">
      <h2>Conversões</h2>
      <div class="toolbar">
        <button id="lambdaToNfaBtn" class="btn-soft">AFNλ → AFN</button>
        <button id="nfaToDfaBtn" class="btn-soft">AFN → AFD</button>
        <button id="nfaToDfaOpenBtn" class="btn-soft">AFN → AFD e abrir</button>
      </div>
      <div id="algoSteps" class="mini scroll"></div>
    </div>

    <div class="card">
      <h2>Operações AFNλ</h2>
      <div class="toolbar">
        <button id="unionBtn" class="btn-soft">União</button>
        <button id="concatBtn" class="btn-soft">Concatenação</button>
        <button id="closureBtn" class="btn-soft">Fecho</button>
        <input type="file" id="importFile1" accept="application/json" style="display:none" />
        <input type="file" id="importFile2" accept="application/json" style="display:none" />
      </div>
    </div>
  </div>


    <script>window.LS_KEY='afn_sim_state_v1';</script>
    <script src="js/core.js"></script>
    <script src="js/run.js"></script>
    <script src="js/algoview.js"></script>
  </body>

</html>
